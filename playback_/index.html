<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>ケセリマで遊ぶ</title>
    <script src="main.js"></script>
</head>

<body>
    <div id="myapp"></div>
    <script>
        function shuffle(array) {
            var currentIndex = array.length, temporaryValue, randomIndex;
            while (0 !== currentIndex) {
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex -= 1;
                temporaryValue = array[currentIndex];
                array[currentIndex] = array[randomIndex];
                array[randomIndex] = temporaryValue;
            }
            return array;
        }

        var keseDeck = [
            /**/0, 0, 0, 0, 0,
            1, 1, 1, 1, 1, 1,
            2, 2, 2, 2, 2, 2,
        ];
        shuffle(keseDeck);
        keseDeck.unshift(0);

        var rimaDeck = [
            /**/0, 0, 0, 0, 0,
            1, 1, 1, 1, 1, 1,
            2, 2, 2, 2, 2, 2,
        ];
        shuffle(rimaDeck);
        rimaDeck.unshift(0);

        var historyFirst = `R+@11 S+@23 K+@15
K{oxo} R{oo+}
--------------------------------
K`;
        var historySecond = `o25-25x14.
Rx51-42.
Ko44.
R+11-21o+22.
KSx43~~~ Ko14~~~ Ko24{o+o}.
Ro53{+xo}.
Ko24~~~ Ko14-14+13.
R+22-23+24ox35[*]{o+o}.
--------------------------------
Rima`;

        var app = Elm.Main.init({
            node: document.getElementById('myapp'),
            flags: {
                keseGoesFirst: Math.random() < 0.5,
                keseDice: Math.random() < 0.5,
                rimaDice: Math.random() < 0.5,
                shipDice: Math.random() < 0.5,
                keseDeck, rimaDeck,
                historyFirst, historySecond
            }
        });

    </script>
</body>

</html>